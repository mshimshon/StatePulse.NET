"use strict";(self.webpackChunkstatepulse_doc=self.webpackChunkstatepulse_doc||[]).push([[4157],{2850:(e,r,s)=>{s.r(r),s.d(r,{assets:()=>c,contentTitle:()=>a,default:()=>h,frontMatter:()=>i,metadata:()=>t,toc:()=>d});const t=JSON.parse('{"id":"Middlewares","title":"The Middlewares","description":"\u2699\ufe0f What are Middlewares?","source":"@site/docs/7.Middlewares.md","sourceDirName":".","slug":"/gs-the-middlewares","permalink":"/gs-the-middlewares","draft":false,"unlisted":false,"editUrl":"https://github.com/mshimshon/StatePulse.NET/docs/7.Middlewares.md","tags":[{"inline":true,"label":"blazor","permalink":"/tags/blazor"},{"inline":true,"label":"reducer","permalink":"/tags/reducer"},{"inline":true,"label":"state-management","permalink":"/tags/state-management"},{"inline":true,"label":"pure-functions","permalink":"/tags/pure-functions"},{"inline":true,"label":"async","permalink":"/tags/async"},{"inline":true,"label":"statepulse","permalink":"/tags/statepulse"},{"inline":true,"label":"csharp","permalink":"/tags/csharp"},{"inline":true,"label":".net","permalink":"/tags/net"}],"version":"current","sidebarPosition":7,"frontMatter":{"slug":"gs-the-middlewares","title":"The Middlewares","tags":["blazor","reducer","state-management","pure-functions","async","statepulse","csharp",".net"],"sidebar_position":7},"sidebar":"tutorialSidebar","previous":{"title":"The Dispatcher","permalink":"/gs-the-dispatcher"}}');var n=s(4848),l=s(8453);const i={slug:"gs-the-middlewares",title:"The Middlewares",tags:["blazor","reducer","state-management","pure-functions","async","statepulse","csharp",".net"],sidebar_position:7},a=void 0,c={},d=[{value:"\u2699\ufe0f What are Middlewares?",id:"\ufe0f-what-are-middlewares",level:2},{value:"\ud83e\udde9 Effect Middleware",id:"-effect-middleware",level:2},{value:"Available Hooks",id:"available-hooks",level:3},{value:"Example: Effect Middleware",id:"example-effect-middleware",level:3},{value:"\ud83d\udcd8 Other Middleware Types",id:"-other-middleware-types",level:2},{value:"\ud83e\uddfc Use Cases",id:"-use-cases",level:2}];function o(e){const r={blockquote:"blockquote",br:"br",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(r.h2,{id:"\ufe0f-what-are-middlewares",children:"\u2699\ufe0f What are Middlewares?"}),"\n",(0,n.jsxs)(r.p,{children:["StatePulse uses ",(0,n.jsx)(r.strong,{children:"middleware interfaces"})," to tap into the lifecycle of ",(0,n.jsx)(r.strong,{children:"effects"}),", ",(0,n.jsx)(r.strong,{children:"reducers"}),", and ",(0,n.jsx)(r.strong,{children:"dispatches"}),".",(0,n.jsx)(r.br,{}),"\n","These middleware hooks are useful for ",(0,n.jsx)(r.strong,{children:"logging"}),", ",(0,n.jsx)(r.strong,{children:"metrics"}),", ",(0,n.jsx)(r.strong,{children:"analytics"}),", or ",(0,n.jsx)(r.strong,{children:"debugging"})," \u2014 but should ",(0,n.jsx)(r.strong,{children:"never alter behavior"})," or mutate state."]}),"\n",(0,n.jsxs)(r.blockquote,{children:["\n",(0,n.jsx)(r.p,{children:"\u2757 Middleware is observational only \u2014 do not use it to change logic or outcomes."}),"\n"]}),"\n",(0,n.jsx)(r.h2,{id:"-effect-middleware",children:"\ud83e\udde9 Effect Middleware"}),"\n",(0,n.jsxs)(r.p,{children:[(0,n.jsx)(r.code,{children:"IEffectMiddleware"})," allows you to hook into the execution of any effect."]}),"\n",(0,n.jsx)(r.h3,{id:"available-hooks",children:"Available Hooks"}),"\n",(0,n.jsxs)(r.ul,{children:["\n",(0,n.jsxs)(r.li,{children:[(0,n.jsx)(r.code,{children:"BeforeEffect(object action)"})," \u2013 called ",(0,n.jsx)(r.strong,{children:"before"})," the effect runs"]}),"\n",(0,n.jsxs)(r.li,{children:[(0,n.jsx)(r.code,{children:"AfterEffect(object action)"})," \u2013 called ",(0,n.jsx)(r.strong,{children:"after"})," the effect completes"]}),"\n",(0,n.jsxs)(r.li,{children:[(0,n.jsx)(r.code,{children:"WhenEffectValidationFailed(object action, object effectValidator)"})," \u2013 called when a validator blocks execution"]}),"\n",(0,n.jsxs)(r.li,{children:[(0,n.jsx)(r.code,{children:"WhenEffectValidationSucceed(object action, object effectValidator)"})," \u2013 called when a validator passes"]}),"\n"]}),"\n",(0,n.jsx)(r.h3,{id:"example-effect-middleware",children:"Example: Effect Middleware"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-csharp",metastring:'title="LoggingMiddleware.cs"',children:'internal class LoggingMiddleware : IEffectMiddleware\r\n{\r\n    private readonly ILogger _logger;\r\n\r\n    public LoggingMiddleware(ILogger logger)\r\n    {\r\n        _logger = logger;\r\n    }\r\n    public Task AfterEffect(object action)\r\n    {\r\n        string message = $"{action.GetType()} finished execution.";\r\n        _logger.LogDebug(message);\r\n        return Task.CompletedTask;\r\n    }\r\n    public Task BeforeEffect(object action) => Task.CompletedTask;\r\n    public Task WhenEffectValidationFailed(object action, object effectValidator) => Task.CompletedTask;\r\n    public Task WhenEffectValidationSucceed(object action, object effectValidator) => Task.CompletedTask;\r\n}\r\n\n'})}),"\n",(0,n.jsx)(r.h2,{id:"-other-middleware-types",children:"\ud83d\udcd8 Other Middleware Types"}),"\n",(0,n.jsx)(r.p,{children:"Additional interfaces are available to observe other parts of the StatePulse pipeline:"}),"\n",(0,n.jsxs)(r.ul,{children:["\n",(0,n.jsxs)(r.li,{children:[(0,n.jsx)(r.code,{children:"IReducerMiddleware"})," \u2013 Observe ",(0,n.jsx)(r.strong,{children:"reducer"})," executions (before/after)"]}),"\n",(0,n.jsxs)(r.li,{children:[(0,n.jsx)(r.code,{children:"IDispatcherMiddleware"})," \u2013 Observe all ",(0,n.jsx)(r.strong,{children:"dispatched actions"})," (before/after)"]}),"\n"]}),"\n",(0,n.jsxs)(r.p,{children:["These follow a similar structure to ",(0,n.jsx)(r.code,{children:"IEffectMiddleware"}),", offering lifecycle hooks such as:"]}),"\n",(0,n.jsxs)(r.ul,{children:["\n",(0,n.jsx)(r.li,{children:(0,n.jsx)(r.code,{children:"Before..."})}),"\n",(0,n.jsx)(r.li,{children:(0,n.jsx)(r.code,{children:"After..."})}),"\n"]}),"\n",(0,n.jsxs)(r.blockquote,{children:["\n",(0,n.jsxs)(r.p,{children:["\u26a0\ufe0f Just like with effects, these middleware interfaces are ",(0,n.jsx)(r.strong,{children:"observational only"})," \u2014 they should not alter state or behavior."]}),"\n"]}),"\n",(0,n.jsx)(r.h2,{id:"-use-cases",children:"\ud83e\uddfc Use Cases"}),"\n",(0,n.jsx)(r.p,{children:"Here are common use cases for StatePulse middleware:"}),"\n",(0,n.jsxs)(r.ul,{children:["\n",(0,n.jsxs)(r.li,{children:["\u2705 Logging effects, reducers, or dispatches for ",(0,n.jsx)(r.strong,{children:"debugging"})]}),"\n",(0,n.jsxs)(r.li,{children:["\ud83d\udcca Tracking ",(0,n.jsx)(r.strong,{children:"user behavior"})]}),"\n",(0,n.jsxs)(r.li,{children:["\u23f1\ufe0f Measuring ",(0,n.jsx)(r.strong,{children:"performance metrics"})]}),"\n",(0,n.jsxs)(r.li,{children:["\ud83d\udcc8 Collecting ",(0,n.jsx)(r.strong,{children:"analytics"})," without mutating state or logic"]}),"\n"]})]})}function h(e={}){const{wrapper:r}={...(0,l.R)(),...e.components};return r?(0,n.jsx)(r,{...e,children:(0,n.jsx)(o,{...e})}):o(e)}},8453:(e,r,s)=>{s.d(r,{R:()=>i,x:()=>a});var t=s(6540);const n={},l=t.createContext(n);function i(e){const r=t.useContext(l);return t.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function a(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:i(e.components),t.createElement(l.Provider,{value:r},e.children)}}}]);